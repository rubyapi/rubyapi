#!/bin/bash

# This script is used to setup a devcontainer for the project.
# It is run as the user "vscode" inside the container.

set -o errexit
set -o nounset
set -o pipefail

RUBY_VERSION="$(cat .ruby-version)"

if ! [ -x "$(command -v ruby)" ]; then
    echo "Installing Ruby version ${RUBY_VERSION}..."
    rbenv install "${RUBY_VERSION}" &>/dev/null
else
    echo "Ruby already installed, skipping"
fi

# Install required libs
sudo apt update -qq && sudo apt install -y libpq-dev

bin/setup
